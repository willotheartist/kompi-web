/* src/app/blog/blog-article.css */
/* Medium-ish article typography skin for Kompi PSEO blog */

:root{
  --k-ink: #111;
  --k-muted: rgba(0,0,0,.58);
  --k-soft: rgba(0,0,0,.08);
  --k-link: #111;
  --k-bg: #fff;

  /* Header offset (MUST match your fixed header height) */
  --k-header-offset: 88px;
  --k-header-gap: 16px;
}

.k-article-wrap{
  background: var(--k-bg);
  color: var(--k-ink);

  /* ✅ header overlap fix */
  padding-top: calc(var(--k-header-offset) + var(--k-header-gap));

  /* ✅ sticky can break if any ancestor clips overflow */
  overflow: visible;
}

.k-shell{
  max-width: 1080px;
  margin: 0 auto;
  padding: 0 20px;

  /* ✅ sticky safety */
  overflow: visible;
}

.k-grid{
  display: grid;
  grid-template-columns: 1fr;

  /* ✅ sticky safety */
  overflow: visible;
}

/* ✅ Critical: allow grid children to shrink (prevents overflow into sidebar) */
.k-grid > *{
  min-width: 0;
}

@media (min-width: 1024px){
  .k-grid{
    grid-template-columns: minmax(0, 720px) 300px;
    gap: 56px;
    align-items: start;
  }
}

.k-article{
  max-width: 720px;
  margin: 0 auto;
  padding: 48px 20px 72px;

  /* extra safety: never paint outside column */
  min-width: 0;
}

.k-article header{
  margin-bottom: 28px;
}

.k-eyebrow{
  font: 600 12px/1.2 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  letter-spacing: .08em;
  text-transform: uppercase;
  color: var(--k-muted);
}

.k-title{
  margin-top: 10px;
  font: 700 44px/1.08 ui-serif, Charter, "Bitstream Charter", "Sitka Text", Georgia, serif;
  letter-spacing: -.02em;
}

.k-subtitle{
  margin-top: 12px;
  font: 400 20px/1.45 ui-serif, Charter, Georgia, serif;
  color: var(--k-muted);
  max-width: 38em;
}

.k-meta{
  margin-top: 18px;
  display: flex;
  align-items: center;
  gap: 12px;
  color: var(--k-muted);
  font: 500 13px/1.3 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
}

.k-avatar{
  width: 28px;
  height: 28px;
  border-radius: 999px;
  background: rgba(0,0,0,.1);
  display: inline-block;
}

.k-divider{
  height: 1px;
  background: var(--k-soft);
  margin: 18px 0 0;
}

/* Content */
.k-content{
  margin-top: 28px;
  font-family: ui-serif, Charter, "Bitstream Charter", "Sitka Text", Georgia, serif;
  font-size: 20px;
  line-height: 1.75;

  /* ✅ default safety for long words */
  overflow-wrap: break-word;
}

.k-content p{
  margin: 0 0 18px;
}

.k-content a{
  color: var(--k-link);
  text-decoration: underline;
  text-underline-offset: 3px;
  text-decoration-thickness: 1px;
}

.k-content a:hover{
  text-decoration-thickness: 2px;
}

.k-content h2{
  margin: 44px 0 10px;
  font: 700 26px/1.25 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  letter-spacing: -.01em;
}

.k-content h3{
  margin: 30px 0 10px;
  font: 700 20px/1.25 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  letter-spacing: -.01em;
}

.k-content ul{
  margin: 0 0 18px;
  padding-left: 1.1em;
}

.k-content li{
  margin: 8px 0;
}

/* ✅ anchor jumps don’t hide under fixed header */
.k-content section{
  scroll-margin-top: calc(var(--k-header-offset) + var(--k-header-gap) + 12px);
}

/* Drop cap like Medium */
.k-content.k-dropcap p:first-of-type::first-letter{
  float: left;
  font: 700 64px/0.9 ui-serif, Charter, Georgia, serif;
  margin: 6px 10px 0 0;
  letter-spacing: -.02em;
}

/* Q/A callouts – subtle, not “card UI” */
.k-content .k-qa{
  padding: 14px 16px;
  border-left: 3px solid rgba(0,0,0,.18);
  background: rgba(0,0,0,.03);
  border-radius: 10px;
  margin: 18px 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  font-size: 16px;
  line-height: 1.6;
  color: rgba(0,0,0,.75);
}

/* ✅ Scrollable URL/query “chips” (created by AutoLinkedContent) */
.k-scrollline{
  margin: 14px 0 18px;
  border: 1px solid rgba(0,0,0,.10);
  background: rgba(0,0,0,.04);
  border-radius: 14px;
  padding: 12px 14px;

  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;

  max-width: 100%;
}

.k-scrollline code{
  display: block;
  white-space: nowrap;
  min-width: max-content;

  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 14px;
  line-height: 1.55;

  background: transparent;
  padding: 0;
  border-radius: 0;
}

/* Optional: a small scrollbar that looks intentional */
.k-scrollline::-webkit-scrollbar{
  height: 8px;
}
.k-scrollline::-webkit-scrollbar-thumb{
  background: rgba(0,0,0,.18);
  border-radius: 999px;
}
.k-scrollline::-webkit-scrollbar-track{
  background: rgba(0,0,0,.06);
  border-radius: 999px;
}

.k-related{
  margin-top: 52px;
  padding-top: 24px;
  border-top: 1px solid var(--k-soft);
}

.k-related h4{
  font: 700 16px/1.2 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  margin: 0 0 12px;
}

.k-related a{
  display: block;
  padding: 10px 0;
  color: var(--k-ink);
  text-decoration: none;
  border-bottom: 1px solid rgba(0,0,0,.06);
  font: 500 16px/1.25 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
}

.k-related a:hover{
  text-decoration: underline;
  text-underline-offset: 3px;
}

/* Quotes / callouts */
.k-content blockquote{
  margin: 26px 0;
  padding: 0 0 0 18px;
  border-left: 3px solid rgba(0,0,0,.25);
  color: rgba(0,0,0,.75);
  font-style: italic;
}

.k-content blockquote p{
  margin: 0;
}

/* Inline code + code blocks */
.k-content code{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: .88em;
  background: rgba(0,0,0,.05);
  padding: .12em .35em;
  border-radius: 6px;

  max-width: 100%;
  overflow-wrap: anywhere;
  word-break: break-word;
}

.k-content pre{
  margin: 22px 0;
  padding: 16px 18px;
  border-radius: 14px;
  background: rgba(0,0,0,.05);
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.k-content pre code{
  background: transparent;
  padding: 0;
  font-size: 14px;
  line-height: 1.55;
}

/* Subtle “label” treatment */
.k-label{
  font: 650 12px/1.2 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  letter-spacing: .08em;
  text-transform: uppercase;
  color: rgba(0,0,0,.55);
}

/* Sidebar */
.k-aside{
  display: none;

  /* ✅ sticky safety */
  overflow: visible;
}

@media (min-width: 1024px){
  .k-aside{
    display: block;

    /* ✅ important for sticky inside grid */
    align-self: start;
    position: relative;
    overflow: visible;
  }

  /* ✅ APPLY STICKY ON THE ASIDE ITSELF (more reliable than inner wrapper) */
  .k-aside{
    position: sticky;
    top: calc(var(--k-header-offset) + var(--k-header-gap));
  }

  /* Inner wrapper just stacks panels */
  .k-sticky{
    position: relative;
  }
}

.k-panel{
  border: 1px solid rgba(0,0,0,.08);
  border-radius: 16px;
  padding: 14px 14px;
  background: rgba(0,0,0,.02);
  box-shadow: 0 1px 0 rgba(0,0,0,.04);
}

.k-panel + .k-panel{ margin-top: 14px; }

.k-panel h4{
  margin: 0 0 10px;
  font: 700 13px/1.2 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  letter-spacing: .02em;
}

.k-panel a{
  color: rgba(0,0,0,.78);
  text-decoration: none;
  display: block;
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid transparent;

  /* ✅ prevent long labels from overflowing */
  white-space: normal;
  overflow-wrap: anywhere;
}

.k-panel a:hover{
  text-decoration: none;
  border-color: rgba(0,0,0,.08);
  background: rgba(0,0,0,.03);
}

/* TL;DR block */
.k-tldr{
  margin: 22px 0 6px;
  padding: 14px 16px;
  border-left: 3px solid rgba(0,0,0,.22);
  background: rgba(0,0,0,.03);
  border-radius: 14px;
}

.k-tldr h4{
  margin: 0 0 10px;
  font: 750 12px/1.2 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  letter-spacing: .08em;
  text-transform: uppercase;
  color: rgba(0,0,0,.6);
}

.k-tldr ul{
  margin: 0;
  padding-left: 1.1em;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  font-size: 15px;
  line-height: 1.6;
  color: rgba(0,0,0,.78);
}

.k-btn{
  display: inline-block;
  width: 100%;
  text-align: center;
  padding: 10px 12px;
  border-radius: 12px;
  background: rgba(0,0,0,.92);
  color: #fff !important;
  font: 650 14px/1.2 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  text-decoration: none !important;
}

.k-btn:hover{ background: rgba(0,0,0,.84); }

/* Examples library */
.k-examples{
  margin: 18px 0 0;
  display: grid;
  grid-template-columns: 1fr;
  gap: 14px;
}

@media (min-width: 720px){
  .k-examples{ grid-template-columns: 1fr 1fr; }
}

.k-example{
  border: 1px solid rgba(0,0,0,.08);
  border-radius: 16px;
  padding: 14px 14px;
  background: #fff;

  min-width: 0;
}

.k-example h5{
  margin: 0 0 10px;
  font: 750 15px/1.2 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
}

.k-example dl{
  margin: 0;
  display: grid;
  gap: 8px;
}

.k-example dt{
  font: 700 11px/1.2 ui-sans-serif, system-ui;
  letter-spacing: .08em;
  text-transform: uppercase;
  color: rgba(0,0,0,.55);
}

.k-example dd{
  margin: 2px 0 0;
  font: 400 14px/1.55 ui-sans-serif, system-ui;
  color: rgba(0,0,0,.78);

  overflow-wrap: anywhere;
}

.k-playbook{
  margin: 10px 0 0;
  display: grid;
  gap: 14px;
}

.k-week{
  border: 1px solid rgba(0,0,0,.08);
  border-radius: 16px;
  padding: 14px 14px;
  background: rgba(0,0,0,.02);
}

.k-week h5{
  margin: 0 0 10px;
  font: 750 15px/1.2 ui-sans-serif, system-ui;
}

.k-week ul{
  margin: 0;
  padding-left: 1.1em;
  font: 400 15px/1.65 ui-sans-serif, system-ui;
  color: rgba(0,0,0,.78);
}
